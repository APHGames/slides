include ../mixins/containers.pug
include ../mixins/containers_aph.pug

- var imgAssets = '../assets/space_procedural/';
- var defaultBgr = 'backgrounds/fractal_city.jpg';

+mchapter('Procedurální generování', imgAssets+'chapter_procedural.svg')
+frameInbox('Generování obsahu')
	.important-green.spacing-3xs
		ul
			li.upside.fragment(data-fragment-index='3') nekonečný počet možností a možných struktur
			li.upside.fragment(data-fragment-index='4') šetří paměť, kterou by zabrala statická data
			li.upside.fragment(data-fragment-index='5') vysoká míra variability pro hráče
			li.downside.fragment(data-fragment-index='6') horší testování
			li.downside.fragment(data-fragment-index='7') můžeme vygenerovat nehratelný svět
		.scope.mt-30.fragment(data-fragment-index='8')
			p Hry s procedurálním obsahem
			ul
				li.fragment(data-fragment-index='9') <span class="highlight-2">Rogue (1980)</span> - dungeony
				li.fragment(data-fragment-index='10') <span class="highlight-2">Diablo (1996)</span> - dungeony
				li.fragment(data-fragment-index='11') <span class="highlight-2">OpenTTD (2004)</span> - terén
				li.fragment(data-fragment-index='12') <span class="highlight-2">Dwarf Fortress (2006)</span> - content, historie, bytosti
				li.fragment(data-fragment-index='13') <span class="highlight-2">Spore (2008)</span> - bytosti, civilizace, planety
				li.fragment(data-fragment-index='14') <span class="highlight-2">No Man's Sky (2016)</span> - galaxie, planety, fauna, flóra
		.top-320.right-480.fragment(data-fragment-index='2')
			img.width-400(src=imgAssets+'procedural_textures.jpg')
		.bottom-40.right-60.fragment(data-fragment-index='11')
			img.width-500(src=imgAssets+'openttd_terrain.png')
		.bottom-500.right-60.fragment(data-fragment-index='9')
			img.width-500(src=imgAssets+'rogue.png')
+frameInbox('Procedurální generátory')
	.important-green
		.flex-cols-2.spacing-xs
			div
				.scope.fragment.fade-up
					p Generátor terénu
					ul
						li generátory šumu
						li box linear filter (box blur)
						li midpoint displacement
				.scope.fragment.fade-up
					p Generátor levelů
					ul
						li cyklické generátory
						li pochodující čtverce
						li generátory postavené na systému pravidel
				.scope.fragment.fade-up
					p Generátor patternů
					ul
						li generátory šumu
						li L-systémy
						li markovské řetězce
			div
				.scope.fragment.fade-up
					p Zaplnění prostoru
					ul
						li náhodná procházka
						li buněčný automat
						li Poisson-disc sampling 
						li settling
						li wang tiles
				.scope.fragment.fade-up
					p Rozdělování prostoru
					ul
						li binary space partition
						li voronoiské diagramy
						li dijkstrovy mapy
						li tree mapping
+frameInbox('Příklad: generátor terénu')
	div
		ol.spacing-xl.fragment(data-fragment-index='1')
			li vygeneruje se výšková mapa
			li provede se upscale
			li provede se interpolace
			li aplikují se efekty (eroze, dilatace,...)
		.top-60.right-200.fragment(data-fragment-index='1')
			img.height-440(src=imgAssets+'terrain_generator.svg')
		.flex-cols-2.mt-30
			div.text-center.mt-40.fragment(data-fragment-index='2')
				img.height-320(src=imgAssets+'terrain_generator_heightmap.jpg')
			div.text-center.fragment(data-fragment-index='3')
				img.height-400(src=imgAssets+'terrain_generator_heightmap2.png')
		.bottom-180.left-750.fragment(data-fragment-index='3')
			img.height-80(src=imgAssets+'arrow.svg')
+frameInbox('Příklad: generátor 2D levelu')
	div
		ol.spacing-lg
			li vytvoří se bounding box
			li rozdělí se do regionů (axis-aligned binary splits)
			li části se propojí
			li každému regionu se přiřadí typ
			li výsledek se vyhladí
	.bottom-0.right-0
		img.height-600(src=imgAssets+'level_generator.svg')
+frameInbox('Příklad: Settling')
	div
		ol.spacing-lg
			li vygenerují se obdélníky, které se překrývají
			li aplikuje se odpudivá síla, dokud se nepřestanou překrývat
			li vygenerují se místnosti
			li vygenerují se cesty
	.bottom-0.right-0
		img.height-700(src=imgAssets+'dungeon_generator.svg')
+frameInbox('Šum')
	.important-orange
		ul
			li.fragment Nahodilost se používá pro variaci hodnot, šum se používá pro variaci v čase či prostoru
			li.mt-40.fragment <span class="highlight">Šumové funkce</span>
				ul
					li.fragment <span class="highlight-2">Mřížkové</span>
						ul
							li.fragment Perlinův šum, Simplex, Wavelet, Value
					li.fragment <span class="highlight-2">Bodový</span>
						ul
							li.fragment Worleyho šum (Voronoiský/Buněčný)
		.space-md
		.flex-cols-3.fragment
			figure
				img.height-320(src=imgAssets+'noise_perlin.jpg')
				p Perlinův šun
			figure
				img.height-320(src=imgAssets+'noise_simplex.jpg')
				p Simplex
			figure
				img.height-320(src=imgAssets+'noise_worley.jpg')
				p Worleyho šum
+frameInbox('Perlinův šum')
	.important-green
		ul
			li.fragment.fade-up <span class="highlight">Perlinův šum</span> - vytvořen Kenem Perlinem v roce 1983
			li.fragment.fade-up <span class="highlight">Simplex</span> - vylepšený Perlinův šum s méně artefakty
			li.fragment.fade-up oba šumy používají pseudonáhodnou mřížku a interpolaci
			li.fragment.fade-up šum se konstruuje z oktáv (amplituda signálu v daném měřítku)
			li.fragment.fade-up signál je interpolován pomocí funkce
				include ../../assets/space_procedural/equations_generated/perlin_noise.svg
		.code.text-2xs.mt-13.fragment.fade-up
			include ../../assets/space_procedural/snippets_generated/perlin_noise.html
+frameInbox('Fraktály')
	ul
		li.fragment.fade-up objeveny v roce 1975
		li.fragment.fade-up geometrické tvary, které je možno rozdělit na části, které jsou kopií celku
		li.fragment.fade-up používá se pro generování textur a efektů
		li.fragment.fade-up jejich využití v real-time je stále ve výzkumu 
	.flex-cols-2
		div.height-400.text-center
			img(src=imgAssets+'fractals.jpg')
		div.height-400.text-center
			img(src=imgAssets+'mandelbrot.jpg')
	.bottom-0.left-530
		img.height-300(src=imgAssets+'fractal_city.jpg')